"use strict";(self.webpackChunkfood_app=self.webpackChunkfood_app||[]).push([[655],{1655:(E,_,a)=>{a.r(_),a.d(_,{RecipesModule:()=>$});var l=a(6814),g=a(3403),C=a(5061),d=a(7700),e=a(5879);function R(n,c){if(1&n&&(e.TgZ(0,"span",6),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.Oqu(t.name)}}let b=(()=>{class n{constructor(t,o){this.dialogRef=t,this.data=o,this.imgUrl="https://upskilling-egypt.com:3006/",this.emptyImge="../../../assets/Images/18b9ffb2a8a791d50213a9d595c4dd52.jpg"}onNoClick(){this.dialogRef.close()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(d.so),e.Y36(d.WI))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-viewrecipe"]],decls:22,vars:9,consts:[[1,"py-4"],[1,"text-end","px-4"],[1,"text-danger",3,"click"],[1,"fa-solid","fa-xmark-circle","fa-2x"],[1,"container"],["alt","",3,"src"],[1,"fw-bold"],["class","fw-bold",4,"ngFor","ngForOf"]],template:function(o,i){1&o&&(e.TgZ(0,"section",0)(1,"div",1)(2,"a",2),e.NdJ("click",function(){return i.onNoClick()}),e._UZ(3,"i",3),e.qZA()(),e.TgZ(4,"div",4),e._UZ(5,"img",5),e.TgZ(6,"h1"),e._uU(7),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.TgZ(10,"p"),e._uU(11,"Price: "),e.TgZ(12,"span",6),e._uU(13),e.ALo(14,"currency"),e.qZA()(),e.TgZ(15,"p"),e._uU(16,"Category: "),e.YNc(17,R,2,1,"span",7),e.qZA(),e.TgZ(18,"p"),e._uU(19,"Tag: "),e.TgZ(20,"span",6),e._uU(21),e.qZA()()()()),2&o&&(e.xp6(5),e.Q6J("src",i.data.imagePath?i.imgUrl+i.data.imagePath:i.emptyImge,e.LSH),e.xp6(2),e.Oqu(i.data.name),e.xp6(2),e.Oqu(i.data.description),e.xp6(4),e.Oqu(e.xi3(14,6,i.data.price," EGP ")),e.xp6(4),e.Q6J("ngForOf",i.data.category),e.xp6(4),e.Oqu(i.data.tag.name))},dependencies:[l.sg,l.H9],styles:["section[_ngcontent-%COMP%]{width:400px;text-align:center}section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%}section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();var f=a(4400),Z=a(7302),u=a(6311),x=a(2296),I=a(617),U=a(2032),m=a(9157),s=a(6223),y=a(3365),T=a(4913),v=a(3680);function q(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.searchValue="",e.KtG(i.getAllRecipes())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function S(n,c){if(1&n&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function w(n,c){if(1&n&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",t.name," ")}}function N(n,c){1&n&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function O(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,N,2,0,"span",32),e.qZA()),2&n){const t=c.$implicit,o=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",o.category.length>1)}}const J=function(n){return["edit",n]};function F(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",26),e._UZ(4,"img",27),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.YNc(12,O,3,2,"span",21),e.qZA(),e.TgZ(13,"td")(14,"button",28)(15,"mat-icon"),e._uU(16,"more_vert"),e.qZA()(),e.TgZ(17,"mat-menu",null,29)(19,"button",30),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.openDialogView(r))}),e.TgZ(20,"mat-icon"),e._uU(21,"visibility"),e.qZA(),e.TgZ(22,"span"),e._uU(23,"View"),e.qZA()(),e.TgZ(24,"button",31)(25,"mat-icon"),e._uU(26," edit_square "),e.qZA(),e.TgZ(27,"span"),e._uU(28,"Edit"),e.qZA()(),e.TgZ(29,"button",30),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.openDialogDelete(r.id))}),e.TgZ(30,"mat-icon"),e._uU(31,"delete"),e.qZA(),e.TgZ(32,"span"),e._uU(33,"Delete"),e.qZA()()()()()}if(2&n){const t=c.$implicit,o=e.MAs(18),i=e.oxw();e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("src",t.imagePath?i.imgUrl+t.imagePath:i.emptyImge,e.LSH),e.xp6(2),e.Oqu(t.price),e.xp6(2),e.Oqu(t.description.split(" ").slice(0,4).join(" ")),e.xp6(2),e.Oqu(t.tag.name),e.xp6(2),e.Q6J("ngForOf",t.category),e.xp6(2),e.Q6J("matMenuTriggerFor",o),e.xp6(10),e.Q6J("routerLink",e.VKq(8,J,t.id))}}const z=function(){return[]};let M=(()=>{class n{handlePageEvent(t){console.log(t),this.length=t.length,this.pageSize=t.pageSize,this.pageNumber=t.pageIndex,this.getAllRecipes()}constructor(t,o,i){this._RecipeService=t,this._CategoryService=o,this.dialog=i,this.searchValue="",this.imgUrl="https://upskilling-egypt.com:3006/",this.emptyImge="../../../assets/Images/18b9ffb2a8a791d50213a9d595c4dd52.jpg",this.pageNumber=1,this.listData={},this.listTags=[],this.listCategories=[],this.categoryItem="",this.itemData={},this.length=50,this.pageSize=10,this.pageIndex=0,this.pageSizeOptions=[5,10,25,100],this.hidePageSize=!1,this.showPageSizeOptions=!0,this.showFirstLastButtons=!0,this.disabled=!1,this.tageId=0,this.cateId=0}ngOnInit(){this.getAllRecipes(),this.getAllTags(),this.getAllCategories()}getAllRecipes(){this._RecipeService.getAllRecipes({name:this.searchValue,tagId:this.tageId,categoryId:this.cateId,pageSize:this.pageSize,pageNumber:this.pageNumber}).subscribe({next:o=>{console.log("listData",o),this.listData=o},error:o=>{console.log(o)}})}getAllTags(){this._RecipeService.getAllTags().subscribe({next:t=>{this.listTags=t},error:t=>{console.log(t)}})}getAllCategories(){this._CategoryService.getAllCategories(1e3,1).subscribe({next:t=>{this.listCategories=t.data},error:t=>{console.log(t)}})}openDialogView(t){this.dialog.open(b,{data:t}).afterClosed().subscribe(i=>{console.log("The dialog was closed"),console.log(i)})}openDialogDelete(t){this.dialog.open(C.T,{data:{itemId:t}}).afterClosed().subscribe(i=>{console.log("The dialog was closed"),console.log(i),this.deleteCategory(i)})}deleteCategory(t){this._RecipeService.onDeleteRecipe(t).subscribe({next:o=>{console.log(o)},error:o=>{console.log(o)},complete:()=>{this.getAllRecipes()}})}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(f.j),e.Y36(Z.H),e.Y36(d.uw))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-recipes"]],decls:69,vars:12,consts:[[1,"full-page"],[1,"mt-4"],[1,"page-title","w-100","bg-success-main"],[1,"container"],[1,"row","justify-content-between","align-items-center","px-4"],[1,"col-md-6"],[1,"col-md-3"],[1,"text-end"],["src","../../../assets/Images/img-cate.svg","alt","",1,"w-75"],[1,"d-flex","justify-content-between","align-items-center","p-4"],["routerLink","add",1,"success-main","px-4"],[1,"row"],["appearance","outline",1,"w-100"],["matInput","","type","text",3,"ngModel","ngModelChange","keyup.enter"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["appearance","outline"],[3,"ngModel","ngModelChange","selectionChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"table","table-hover","text-center"],[1,"py-4"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"demo-paginator",3,"length","pageSize","pageSizeOptions","pageIndex","page"],["paginator",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],[1,"w-25"],["alt","",1,"w-25",3,"src"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"routerLink"],[4,"ngIf"]],template:function(o,i){1&o&&(e.TgZ(0,"section",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div")(7,"h1"),e._uU(8,"Recipes "),e.TgZ(9,"span"),e._uU(10,"Item"),e.qZA()(),e.TgZ(11,"p"),e._uU(12,"You can now add your items that any user can order it from the Application and you can edit"),e.qZA()()(),e.TgZ(13,"div",6)(14,"div",7),e._UZ(15,"img",8),e.qZA()()()()(),e.TgZ(16,"div",9)(17,"div")(18,"h3"),e._uU(19,"Recipes Table Details"),e.qZA(),e.TgZ(20,"p"),e._uU(21,"You can check all details"),e.qZA()(),e.TgZ(22,"div")(23,"button",10),e._uU(24," Add New Recipes "),e.qZA()()()(),e.TgZ(25,"div",3)(26,"div",11)(27,"div",5)(28,"mat-form-field",12)(29,"mat-label"),e._uU(30,"Clearable input"),e.qZA(),e.TgZ(31,"input",13),e.NdJ("ngModelChange",function(p){return i.searchValue=p})("keyup.enter",function(){return i.getAllRecipes()}),e.qZA(),e.YNc(32,q,3,0,"button",14),e.qZA()(),e.TgZ(33,"div",6)(34,"mat-form-field",15)(35,"mat-label"),e._uU(36,"Tags"),e.qZA(),e.TgZ(37,"mat-select",16),e.NdJ("ngModelChange",function(p){return i.tageId=p})("selectionChange",function(){return i.getAllRecipes()}),e.TgZ(38,"mat-option",17),e._uU(39,"All"),e.qZA(),e.YNc(40,S,2,2,"mat-option",18),e.qZA()()(),e.TgZ(41,"div",6)(42,"mat-form-field",15)(43,"mat-label"),e._uU(44,"Categories"),e.qZA(),e.TgZ(45,"mat-select",16),e.NdJ("ngModelChange",function(p){return i.cateId=p})("selectionChange",function(){return i.getAllRecipes()}),e.TgZ(46,"mat-option",17),e._uU(47,"All"),e.qZA(),e.YNc(48,w,2,2,"mat-option",18),e.qZA()()()()(),e.TgZ(49,"table",19)(50,"thead")(51,"th",20),e._uU(52,"Name"),e.qZA(),e.TgZ(53,"th",20),e._uU(54,"Image"),e.qZA(),e.TgZ(55,"th",20),e._uU(56,"Price"),e.qZA(),e.TgZ(57,"th",20),e._uU(58,"Description"),e.qZA(),e.TgZ(59,"th",20),e._uU(60,"Tag"),e.qZA(),e.TgZ(61,"th",20),e._uU(62,"Category"),e.qZA(),e.TgZ(63,"th",20),e._uU(64,"Actions"),e.qZA()(),e.TgZ(65,"tbody"),e.YNc(66,F,34,10,"tr",21),e.qZA()(),e.TgZ(67,"mat-paginator",22,23),e.NdJ("page",function(p){return i.handlePageEvent(p)}),e.qZA()()),2&o&&(e.xp6(31),e.Q6J("ngModel",i.searchValue),e.xp6(1),e.Q6J("ngIf",i.searchValue),e.xp6(5),e.Q6J("ngModel",i.tageId),e.xp6(3),e.Q6J("ngForOf",i.listTags),e.xp6(5),e.Q6J("ngModel",i.cateId),e.xp6(3),e.Q6J("ngForOf",i.listCategories),e.xp6(18),e.Q6J("ngForOf",i.listData.data),e.xp6(1),e.Q6J("length",i.listData.totalNumberOfRecords)("pageSize",i.pageSize)("pageSizeOptions",i.showPageSizeOptions?i.pageSizeOptions:e.DdM(11,z))("pageIndex",i.pageNumber))},dependencies:[l.sg,l.O5,g.rH,u.VK,u.OP,u.p6,x.RK,I.Hw,U.Nt,m.KE,m.hX,m.R9,s.Fj,s.JJ,s.On,y.NW,T.gD,v.ey],styles:["table[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:50px}"]})}return n})();var D=a(5861),P=a(2425),h=a(7680);function Q(n,c){if(1&n&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Y(n,c){if(1&n&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function V(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",19),e.NdJ("removed",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onRemove(i.imgSrc))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("file",t.imgSrc)("removable",!0)}}let A=(()=>{class n{constructor(t,o,i,r,p){this._CategoryService=t,this._RecipeService=o,this._ActivatedRoute=i,this._ToastrService=r,this._Router=p,this.tagsList=[],this.categoriesList=[],this.recipesList=[],this.baseImg="https://upskilling-egypt.com:3006/",this.pageNumber=1,this.pageSize=10,this.recipeId=0,this.url="",this.heading="",this.recipeForm=new s.cw({name:new s.NI("",[s.kI.required]),description:new s.NI("",[s.kI.required]),price:new s.NI("",[s.kI.required]),tagId:new s.NI("",[s.kI.required]),recipeImage:new s.NI(""),categoriesIds:new s.NI("")}),this.files=[]}ngOnInit(){this.getAllCategories(),this.getAllTags(),this.recipeId=this._ActivatedRoute.snapshot.params.id,this.recipeId?(this.heading="Update Your Recipe",this.getOneRecipe()):this.heading="Add New Recipe"}getAllCategories(){this._CategoryService.getAllCategories(1e3,1).subscribe({next:t=>{this.categoriesList=t.data}})}getAllTags(){this._RecipeService.getAllTags().subscribe({next:t=>{this.tagsList=t}})}fetchImage(t){var o=this;return(0,D.Z)(function*(){var i=yield fetch(t),r=yield i.blob();o.imgSrc=r})()}getOneRecipe(){this._RecipeService.getRecipeById(this.recipeId).subscribe({next:t=>{console.log(t),this.oneRecipeData=t},error:t=>{console.log(t)},complete:()=>{this.url=`${this.baseImg}${this.oneRecipeData.imagePath}`,this.fetchImage(this.url),this.recipeForm.patchValue({name:this.oneRecipeData.name,description:this.oneRecipeData.description,price:this.oneRecipeData.price,tagId:this.oneRecipeData.tag.id,recipeImage:this.oneRecipeData.imagePath,categoriesIds:this.oneRecipeData.category.map(t=>t.id)})}})}sendRecipeForm(){let t=new FormData;t.append("name",this.recipeForm.value.name),t.append("description",this.recipeForm.value.description),t.append("price",this.recipeForm.value.price),t.append("tagId",this.recipeForm.value.tagId),t.append("recipeImage",this.imgSrc),t.append("categoriesIds",this.recipeForm.value.categoriesIds),this.recipeId?this._RecipeService.onEditRecipe(this.recipeId,t).subscribe({next:o=>{console.log("editRecipe",o),this._ToastrService.success("Recipe is Updated Successfully")},error:o=>{console.log(o),this._ToastrService.error(o.error.message)},complete:()=>{this._Router.navigate(["./dashboard/admin/recipes"])}}):this._RecipeService.onAddRecipe(t).subscribe({next:o=>{console.log("addRecipe",o),this._ToastrService.success(o.message)},error:o=>{console.log(o),this._ToastrService.error(o.error.message)},complete:()=>{this._Router.navigate(["./dashboard/admin/recipes"])}})}onSelect(t){console.log(t),this.files.push(...t.addedFiles),this.imgSrc=this.files[0]}onRemove(t){console.log(t),this.files.splice(this.files.indexOf(t),1)}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(Z.H),e.Y36(f.j),e.Y36(g.gz),e.Y36(P._W),e.Y36(g.F0))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-addeditrecipe"]],decls:31,vars:5,consts:[[1,"px-4","py-3","pb-0"],[1,"heading-color","mb-3","text-center"],[3,"formGroup","ngSubmit"],["formControlName","name","type","text","placeholder","Recipe Name",1,"form-control","mb-3","p-3"],[1,"row"],[1,"col-md-6"],["appearance","outline",1,"w-100"],["formControlName","tagId"],[3,"value",4,"ngFor","ngForOf"],["multiple","","formControlName","categoriesIds"],["type","number","placeholder","Price Of Recipe","formControlName","price",1,"form-control","mb-3","p-3"],["name","","id","","cols","30","rows","5","placeholder","Description","formControlName","description",1,"form-control","mb-3"],[1,"border-success",3,"change"],[1,"fa-solid","fa-arrow-up-from-bracket","fa-2x"],[1,"main-text"],["ngProjectAs","ngx-dropzone-preview","class","w-100",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngIf"],[1,"text-center","mt-5"],[1,"success-main","w-75"],[3,"value"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],1,"w-100",3,"file","removable","removed"]],template:function(o,i){1&o&&(e.TgZ(0,"section",0)(1,"h1",1),e._uU(2),e.qZA(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return i.sendRecipeForm()}),e._UZ(4,"input",3),e.TgZ(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Tags"),e.qZA(),e.TgZ(10,"mat-select",7),e.YNc(11,Q,2,2,"mat-option",8),e.qZA()()(),e.TgZ(12,"div",5)(13,"mat-form-field",6)(14,"mat-label"),e._uU(15,"Categories"),e.qZA(),e.TgZ(16,"mat-select",9),e.YNc(17,Y,2,2,"mat-option",8),e.qZA()()()(),e._UZ(18,"input",10)(19,"textarea",11),e.TgZ(20,"ngx-dropzone",12),e.NdJ("change",function(p){return i.onSelect(p)}),e.TgZ(21,"ngx-dropzone-label"),e._UZ(22,"i",13),e.TgZ(23,"div")(24,"span",14),e._uU(25,"Choose a Recipe Image"),e.qZA(),e._uU(26," to Upload "),e.qZA()(),e.YNc(27,V,1,2,"ngx-dropzone-image-preview",15),e.qZA(),e.TgZ(28,"div",16)(29,"button",17),e._uU(30," Save "),e.qZA()()()()),2&o&&(e.xp6(2),e.Oqu(i.heading),e.xp6(1),e.Q6J("formGroup",i.recipeForm),e.xp6(8),e.Q6J("ngForOf",i.tagsList),e.xp6(6),e.Q6J("ngForOf",i.categoriesList),e.xp6(10),e.Q6J("ngIf",i.imgSrc))},dependencies:[l.sg,l.O5,h._f,h.NP,h.sv,m.KE,m.hX,s._Y,s.Fj,s.wV,s.JJ,s.JL,T.gD,v.ey,s.sg,s.u]})}return n})();const j=[{path:"",component:M},{path:"add",component:A},{path:"edit/:id",component:A}];let L=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(j),g.Bz]})}return n})();var k=a(6208);let $=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[l.ez,L,k.m,s.UX]})}return n})()}}]);